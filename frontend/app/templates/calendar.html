{% extends 'base.html' %}

{% block title %} Calendar {% endblock %}

{% block content %}
    <!-- Import specific CSS -->
    <link rel="stylesheet" href="static/css/calendarstyle.css">

    <div class="container mt-5">
        <p>The calendar database was last updated at: {{ datatime_csv.datatime }}</p>

        <!-- WTForms Form to get input from the user -->
        <form method="POST">
            {{ form.csrf_token }}
        
            <div class="row">
                <div class="col-md-4">
                    <div class="form-group">
                        {{ form.cycle.label }}
                        {{ form.cycle(class="form-control") }}
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group">
                        {{ form.degreetype.label }}
                        {{ form.degreetype(class="form-control") }}
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group">
                        {{ form.credits.label }}
                        {{ form.credits(class="form-control") }}
                    </div>
                </div>

            </div>
        
            <div class="row">
                <div class="col-md-4">
                    <div class="form-group">
                        {{ form.location.label }}
                        {{ form.location(class="form-control") }}
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group">
                        {{ form.teaching.label }}
                        {{ form.teaching(class="form-control") }}
                    </div>
                </div>
            </div>
        
            <div class="row">
                <div class="col-md-12">
                    <div class="form-group">
                        {{ form.submit(class="btn btn-primary") }}
                    </div>
                </div>
            </div>
        </form>

    <!-- Display the result here -->
    <div id="resultContainer" class="mt-3">
        {% if result %}
            {% for lecture_id, lecture in result.items() %}
                <div class="card-mb-3">
                    <div class="card-header">
                        {{ lecture.TEACHING }} - {{ lecture.PARTITION }}
                    </div>
                    <div class="card-body">
                        <p class="card-text">
                            Teacher: <a href="{{ lecture.URL_DOCENTE }}">{{ lecture.LECTURER_NAME }}</a><br>
                            Date: {{ lecture.LECTURE_DAY }}<br>
                            Time: {{ lecture.LECTURE_START }} - {{ lecture.LECTURE_END }}<br>
                            Classroom: {{ lecture.CLASSROOM_NAME }}<br>
                            Address: {{ lecture.ADDRESS }}<br>
                            Course: {{ lecture.DEGREE_NAME }}<br>
                            Degree type: {{ lecture.DEGREE_TYPE }}<br>
                            Study year: {{ lecture.STUDY_YEAR }}<br>
                            Semester: {{ lecture.CYCLE }}<br>
                            Credits: {{ lecture.CREDITS }}<br>
                            Link to teaching page: <a href="{{ lecture.URLS_INSEGNAMENTO }}">{{ lecture.TEACHING }}</a>
                        </p>
                    </div>
                </div>
            {% endfor %}
        {% else %}
            <p class="text-center">Nessuna lezione disponibile.</p>
        {% endif %}
        {% if error_message %}
            <p class="text-danger">{{ error_message }}</p>
        {% endif %}
    </div>

    <!-- QUESTO È UN JAVASCRIPT CHE PUÒ TORNARE UTILE
        <div class="container">
            <input type="text" id="teaching-input" class="autocomplete-input"
            placeholder="Search Teaching">
            <ul class="autocomplete-list" id="teaching-list">
            </ul>
            
    </div>
        <script src="static/js/dropdown.js"></script> -->

{% endblock %}