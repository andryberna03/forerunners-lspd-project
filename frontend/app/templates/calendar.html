{% extends 'base.html' %}

{% block title %} Calendar {% endblock %}

{% block content %}
    <link href='https://cdn.jsdelivr.net/npm/fullcalendar/index.global.min.css' rel='stylesheet' />
    <script src='https://cdn.jsdelivr.net/npm/fullcalendar/index.global.min.js'></script>
    <link rel="stylesheet" href="https://unpkg.com/tippy.js@6/dist/tippy.css" />
    <script src="https://unpkg.com/@popperjs/core@2"></script>
    <script src="https://unpkg.com/tippy.js@6"></script>

    <!-- Import specific CSS -->
    <link rel="stylesheet" href="static/css/calendarstyle.css">
    
    <!-- Greeting header -->
    <div style="margin-top: 75px;">
        <header class="masthead">
            <div class="container px-4 px-lg-5 d-flex h-100 align-items-center justify-content-center">
                <div class="d-flex justify-content-center">
                    <div class="text-center">
                        <h1 class="greeting-text mx-auto my-0 text-uppercase">LET'S FIND YOUR TEACHINGS!</h1>
                    </div>
                </div>
            </div>
        </header>
    </div>

    <!-- How to section -->
    <section>
        <div class="container px-5">
            <div class="row how_to d-flex">
                <div class="col-sm">
                    <h2 class="text-how_to">How to use Ca' Foscari calendar</h2>
                </div>
                <div class="col-sm col-md-6">
                    <p class="lead fw-normal text-muted mb-5 mb-lg-0">Lorem ipsum</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Database updating section -->
    <section class="database">
            <p class="text-database py-3 align-items-center">
                The calendar database was last updated at: {{ datatime_csv.datatime }}
            </p>
    </section>

    <div class="container mt-5">
        <!-- WTForms Form to get input from the user -->
        <form method="POST" id="query-form">
            {{ form.csrf_token }}
            <div class="row">
                <div class="col-md-4">
                    <div class="form-group">
                        {{ form.cycle.label }}
                        {{ form.cycle(class="form-control") }}
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group">
                        {{ form.degreetype.label }}
                        {{ form.degreetype(class="form-control") }}
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group">
                        {{ form.credits.label }}
                        {{ form.credits(class="form-control") }}
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-4">
                    <div class="form-group">
                        {{ form.location.label }}
                        {{ form.location(class="form-control") }}
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group">
                        {{ form.teaching.label }}
                        {{ form.teaching(class="form-control") }}
                    </div>
                </div>
            </div>
            <!-- Submit button -->
            <div class="row">
                <div class="col-md-4">
                    <div class="form-group">
                        {{ form.submit(class="btn btn-primary") }}
                    </div>
                </div>
            </div>
        </form>
    </div>

    <div class="container mt-5">
        <!-- Error message container -->
        <div id="error-message" class="mt-3 text-danger"></div>

        <!-- Calendar container -->
        <div id='calendar-container' class='mt-3' style='display: none;'>
            <div id='calendar'></div>
        </div>
        <br>
        <br>

        <script src="../static/js/display_calendar.js"></script>
    </div>
{% endblock %}